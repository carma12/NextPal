(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{11:function(e,t,r){e.exports={Friend:"Friend_Friend__219Ag",Button:"Friend_Button__3GRam",ButtonRemove:"Friend_ButtonRemove__1Mgl9"}},17:function(e,t,r){e.exports={Header:"Header_Header__3ATBq"}},18:function(e,t,r){e.exports={Friends:"Friends_Friends__1ttQE","lds-hourglass":"Friends_lds-hourglass__2qTAK"}},31:function(e,t,r){},34:function(e,t,r){"use strict";r.r(t);var n=r(7),a=r.n(n),s=r(5),i=(r(30),r(31),r(0)),c=r.n(i),u=r(3),d=r.n(u),o=r(6),f=r(8),l=r(9),p=Object(l.b)({name:"friends",initialState:{users:[],myFriends:[],friendsFromDBReady:!1},reducers:{setMyFriendsList:function(e,t){e.myFriends=t.payload.myFriends,e.friendsFromDBReady=!0},setUsers:function(e,t){var r,n=t.payload.users,a=Object(f.a)(n);try{for(a.s();!(r=a.n()).done;){var s=r.value;e.users.push({id:s.id,first:s.first_name,last:s.last_name,email:s.email,avatar:s.avatar})}}catch(i){a.e(i)}finally{a.f()}},addNewFriend:function(e,t){var r=t.payload;e.myFriends.find((function(e){return e.id===r.id}))||e.myFriends.push({id:r.id,first:r.first,last:r.last,email:r.email,avatar:r.avatar})},deleteFriend:function(e,t){var r=t.payload.friendId,n=e.myFriends.filter((function(e){return e.id!==r}));n&&(e.myFriends=n)}}}),j=p.actions,b=p,h="https://nextpal-5e69e-default-rtdb.firebaseio.com/myFriends.json",m=r(17),v=r.n(m),O=r(1),x=function(){return Object(O.jsxs)("div",{className:v.a.Header,children:[Object(O.jsx)("h1",{children:"NextPal"}),Object(O.jsx)("h3",{children:"Make pals around the world!"})]})},F=r(18),y=r.n(F),w=r(15),k=r(11),_=r.n(k),g=r(19),R=function(e){var t=Object(s.b)(),r=Object(i.useState)("Add Pal"),n=Object(w.a)(r,2),a=n[0],c=n[1],u=Object(i.useState)(""),d=Object(w.a)(u,2),o=d[0],f=d[1];Object(i.useEffect)((function(){e.isFriend&&(c("Delete Pal"),f(e.email))}),[e.isFriend,e.email]);return Object(O.jsxs)("div",{className:_.a.Friend,children:[Object(O.jsx)("img",{src:e.avatar,alt:"A potential friend to add in your friend's list"}),Object(O.jsxs)("p",{children:[e.first," ",e.last]}),Object(O.jsx)("p",{children:Object(O.jsx)("i",{children:o})}),Object(O.jsx)(g.a,{className:e.isFriend?_.a.ButtonRemove:_.a.Button,variant:e.isFriend?"danger":"primary",onClick:e.isFriend?function(){t(j.deleteFriend({friendId:e.id})),c("Add Pal"),f("")}:function(){t(j.addNewFriend({id:e.id,first:e.first,last:e.last,email:e.email,avatar:e.avatar,isFriend:e.isFriend})),c("Delete Pal"),f(e.email)},children:a})]})},E=function(){var e=Object(s.c)((function(e){return e.friends.users})),t=Object(s.c)((function(e){return e.friends.myFriends})),r=Object(s.c)((function(e){return e.friends.friendsFromDBReady})),n=function(e){var r,n=Object(f.a)(t);try{for(n.s();!(r=n.n()).done;){if(r.value.id===e)return!0}}catch(a){n.e(a)}finally{n.f()}return!1},a=r&&Object(O.jsx)("div",{className:y.a.Friends,children:e.map((function(e){return Object(O.jsx)(R,{id:e.id,first:e.first,last:e.last,email:e.email,avatar:e.avatar,isFriend:n(e.id)},e.id)}))}),i=!r&&Object(O.jsx)("div",{className:"lds-hourglass"});return Object(O.jsxs)(c.a.Fragment,{children:[i,a]})},B=!0;var N=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.friends.myFriends}));return Object(i.useEffect)((function(){var r;B?B=!1:e((r=t,function(){var e=Object(o.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=Object(o.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h,{method:"PUT",body:JSON.stringify(r)});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Friend cannot be added");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,n();case 4:t(j.setMyFriendsList({myFriends:r})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("ERROR (storeMyFriends) -> "+e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()))}),[e,t]),Object(i.useEffect)((function(){e(function(){var e=Object(o.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Could not fetch list of friends");case 5:return e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,r();case 4:n=e.sent,t(j.setMyFriendsList({myFriends:n||[]})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("ERROR (getMyFriends) -> "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(i.useEffect)((function(){e(function(){var e=Object(o.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=Object(o.a)(d.a.mark((function e(){var t,r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://reqres.in/api/users?page=1");case 2:return t=e.sent,e.next=5,fetch("https://reqres.in/api/users?page=2");case 5:if(r=e.sent,t.ok&&r.ok){e.next=8;break}throw new Error("Could not fetch list of users");case 8:return e.next=10,t.json();case 10:return n=e.sent,e.next=13,r.json();case 13:return a=e.sent,e.abrupt("return",n.data.concat(a.data));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.next=4,r();case 4:n=e.sent,t(j.setUsers({users:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("ERROR (fetchAllUsers) -> "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{}),Object(O.jsx)(E,{})]})},A=Object(l.a)({reducer:{friends:b.reducer}});a.a.render(Object(O.jsx)(s.a,{store:A,children:Object(O.jsx)(N,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.336f656c.chunk.js.map